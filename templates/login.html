<!DOCTYPE html>
<html>
<head>
    <title>MANOJ :: CYBER SYSTEM</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="hud">

{% if not session.auth %}

<h1>SYSTEM LOGIN</h1>

{% if error %}
<p class="error">{{ error }}</p>
{% endif %}

<form method="POST">
    <input type="password" name="pin" placeholder="ENTER ACCESS PIN" required>
    <button>AUTHENTICATE</button>
</form>

{% else %}

<h1>MANOJ PERSONAL INTERFACE</h1>
<p class="status">STATUS : ONLINE</p>

<div class="files">
    <h2>MY FILES</h2>
    <ul>
        {% for file in files %}
        <li>
            <a href="#" onclick="preview('{{ file }}')">▶ {{ file }}</a>
            <a class="download" href="/files/{{ file }}">⬇</a>
        </li>
        {% endfor %}
    </ul>
</div>

<div class="preview">
    <h2>FILE PREVIEW</h2>
    <pre id="viewer">Select a file...</pre>
</div>

<a class="logout" href="/logout">LOGOUT</a>

{% endif %}

</div>

<div class="scanline"></div>

{% if session.auth %}
<script>
function preview(file) {
    fetch("/preview/" + file)
        .then(res => res.text())
        .then(data => {
            document.getElementById("viewer").textContent = data;
        });
}
</script>
{% endif %}

</body>
</html>
